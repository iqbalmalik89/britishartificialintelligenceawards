;(function($,window,document,undefined){$(document).ready(function($){var $signups=$('.sendpress-signup');$signups.each(function(){$form=$(this),$error=$form.find('#error'),$thanks=$form.find('#thanks'),$exists=$form.find('#exists');});$signups.submit(function(e){e.preventDefault();var signup={},$form=$(this),$error=$form.find('#error'),$thanks=$form.find('#thanks'),$formwrap=$form.find('#form-wrap'),$submit=$form.find('#submit'),$ajaxInd=$form.find('.ajaxloader'),submit_ok=true,emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;$error.hide();$ajaxInd.show();signup['first']=$form.find('.sp_firstname').val();signup['last']=$form.find('.sp_lastname').val();signup['email']=$form.find('.sp_email').val();signup['phonenumber']=$form.find('.sp_phonenumber').val();signup['salutation']=$form.find('.sp_salutation').val();signup['listid']="";signup['formid']=$form.data('form-id');$form.find("input:checkbox.sp_list:checked").each(function(){signup['listid']+=$(this).val()+",";});if(signup['listid']===""){signup['listid']=$form.find('.sp_list').val();}
$form.find('.sp_custom_field').each(function(){var $obj=$(this);signup[$obj.attr('id')]=$obj.val();});$form.find('.custom-field').each(function(){var $obj=$(this);signup[$obj.attr('id')]=$obj.val();});signup['action']='sendpress_subscribe_to_list';if(signup.email.length===0){$error.show();$error.html('<div class="item">*'+sendpress.missingemail+'.</div>');submit_ok=false;}else if(!emailReg.test(signup.email)){$error.show();$error.html('<div class="item">'+sendpress.invalidemail+'.</div>');submit_ok=false;}
$.each($form.find('.required'),function(index,value){if($(value).val().length===0&&submit_ok){$error.show();$error.html('<div class="item">'+sendpress.required+'</div>');submit_ok=false;}});$form.find("input:checkbox#signup_approval").each(function(){var $obj=$(this);if($obj.is(':checked')){signup['signup_approval']="yes";}else{$error.show();$error.html('<div class="item">'+sendpress.required+'</div>');submit_ok=false;}});if(submit_ok){$submit.attr("disabled","disabled");jQuery.post(sendpress.ajaxurl,signup,function(response){try{response=JSON.parse(response);}catch(err){$submit.removeAttr("disabled");if(!jQuery.trim(response).length){response={error:'Server returned empty response during add attempt'};}else{response={error:'Server returned invalid response:<br /><br />'+response};}}
if(response.success){$error.hide();$formwrap.hide();if(response.exists){$exists.show();}else{$thanks.show();}}else{}});}else{$ajaxInd.hide();}
return false;});$('.sendpress-signup .post-notifications-list').on('click',function(e){var $obj=$(this),$form=$obj.closest('form.sendpress-signup'),type=$obj.data('type'),hidden="<input class='post-notifications custom-field' type='hidden' value='"+type+"' name='post_notifications' id='post_notifications'/>";if($obj.is(':checked')){$form.append(hidden);}else{$form.find('.post-notifications').remove();}});});}).call(window.sendpress=window.sendpress||{},jQuery,window,document);
;!function($){"use strict";var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(t){if(null===t)return"null";var e,r,n,o,i=$.type(t);if("undefined"!==i){if("number"===i||"boolean"===i)return String(t);if("string"===i)return $.quoteString(t);if("function"==typeof t.toJSON)return $.toJSON(t.toJSON());if("date"===i){var f=t.getUTCMonth()+1,u=t.getUTCDate(),s=t.getUTCFullYear(),a=t.getUTCHours(),l=t.getUTCMinutes(),c=t.getUTCSeconds(),p=t.getUTCMilliseconds();return f<10&&(f="0"+f),u<10&&(u="0"+u),a<10&&(a="0"+a),l<10&&(l="0"+l),c<10&&(c="0"+c),p<100&&(p="0"+p),p<10&&(p="0"+p),'"'+s+"-"+f+"-"+u+"T"+a+":"+l+":"+c+"."+p+'Z"'}if(e=[],$.isArray(t)){for(r=0;r<t.length;r++)e.push($.toJSON(t[r])||"null");return"["+e.join(",")+"]"}if("object"==typeof t){for(r in t)if(hasOwn.call(t,r)){if("number"===(i=typeof r))n='"'+r+'"';else{if("string"!==i)continue;n=$.quoteString(r)}"function"!==(i=typeof t[r])&&"undefined"!==i&&(o=$.toJSON(t[r]),e.push(n+":"+o))}return"{"+e.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(t){return t.match(escape)?'"'+t.replace(escape,function(t){var e=meta[t];return"string"==typeof e?e:(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})+'"':'"'+t+'"'}}(jQuery);